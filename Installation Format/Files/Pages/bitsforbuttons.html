<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bits for Buttons</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
	
	<style>
		.powerButton {
			border: none;
			color: white;
			padding: 15px 32px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
		}
		
		.powerButton {
			border: none;
			color: white;
			padding: 15px 32px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
			background-color: grey;
		}
	</style>
	<h1> Please Enter the Login Credentials of Your Bot Here</h1>
</head>

<body onload="callCurrentStatus()">
	<button id="home" class="powerButton" onclick="location.href='/';">Home</button>
	<p id="status">Current Status: Running</p>
	<button id="power" onclick="togglePower()" class="powerButton">Turn Bits for Buttons On!</button>
	<script>
		
        var obj;
		var path = 'http://localhost:6969';

		function togglePower() {
            axios.get(path + '/togglePower').then((res) => {
                obj = res.data;
				var curPower = '';
				if (obj.power) {
					curPower = 'Off!';
					document.getElementById("power").style.background = "red";
				} else {
					curPower = 'On!';
					document.getElementById("power").style.background = "green";
				}
				document.getElementById('power').innerText = 'Turn Bits For Buttons ' + curPower;
			});
		};
		
		function callCurrentStatus() {
			setInterval(currentStatus, 100);
		}
		
		function currentStatus() {
            axios.get(path + '/status').then((res) => {
                obj = res.data;
				
				//console.log(obj.status);
				// change to status codes eventually
				document.getElementById("status").innerHTML = 'Current Status: ' + obj.status;
				if (obj.status == 'Connected') {
					document.getElementById("status").style.color = 'green';
				} else {
					document.getElementById("status").style.color = 'red';
				}
				
				if (obj.power) {
					curPower = 'Off!';
					document.getElementById("power").style.background = "red";
				} else {
					curPower = 'On!';
					document.getElementById("power").style.background = "green";
				}
			});
		};
    </script>
</body>

</html>